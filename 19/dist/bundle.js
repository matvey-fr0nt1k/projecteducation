var myApp;(()=>{"use strict";var e={};(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);const t=e=>{var t;document.getElementById(e.target.id).remove(),t=e.target.id,fetch(`https://reqres.in/api/users/${t}`,{method:"delete"}).then((()=>alert("успешно удалено"))).catch((e=>alert(e.message)))},n=e=>{const n=document.createElement("button");return n.id=e,n.innerHTML="Удалить",n.addEventListener("click",t),n},d=e=>{const t=document.createElement("button");return t.id=e,t.innerHTML="Изменить",t.addEventListener("click",a,!1),t},r=e=>{const t=e.target.id.split("-")[1],r=document.querySelector(`#name-${t}`).value,a=document.querySelector(`#email-${t}`).value;e.target.disabled=!0;const i=JSON.stringify({name:r,email:a});((e,t)=>fetch(`https://reqres.in/api/users/${e}`,{method:"put",body:t,headers:{"Content-Type":"application/json;charset=utf-8"}}).then((()=>alert("успешно изменено"))).catch((e=>alert(e.message))))(t,i).then((()=>{const e=document.getElementById(t);e.innerHTML=`id: ${t}; email: ${a}; name: ${r}`,e.appendChild(d(t)),e.appendChild(n(t))}))},a=e=>{const t=e.target.id,n=document.getElementById(t);n.innerHTML=`id: ${t}`;const d=document.createElement("input");d.placeholder="email",d.id=`email-${t}`;const a=document.createElement("input");a.placeholder="name",a.id=`name-${t}`;const i=document.createElement("button");i.innerHTML="Сохранить",i.id=`update-${t}`,i.addEventListener("click",r),n.appendChild(d),n.appendChild(a),n.appendChild(i)},i=d,c=(e,t)=>{fetch(`https://reqres.in/api/users?page=${t}`).then((e=>e.json())).then((t=>{t.data.forEach((t=>{e.appendChild((e=>{const t=document.createElement("li");t.id=e.id;const d=document.createTextNode(`id: ${e.id}; email: ${e.email}; name: ${e.last_name} ${e.first_name}`);return t.appendChild(d),t.appendChild(i(e.id)),t.appendChild(n(e.id)),t})(t))}))})).catch((e=>alert(e.message)))},l=(e,t)=>{const n=document.createElement("button");return n.id=e,n.innerHTML=t,n},o=document.querySelector("#email"),s=document.querySelector("#password"),u=document.querySelector("#login"),m=document.querySelector("form"),p=document.querySelector("#loginErr");let h=1;const v=()=>{h+=1,prev.disabled=!1},y=()=>{h-=1,1===h&&(prev.disabled=!0)},E=()=>{const e=document.querySelector("ul"),t=document.querySelector("span");e.innerHTML="",t.innerHTML=`page ${h}`,c(e,h)},g=e=>{s.value="",o.value="",alert(e.error)},b=(e,t)=>{u.disabled=!0,fetch("https://reqres.in/api/login",{method:"post",body:e,headers:t}).then((e=>e.json())).then((e=>{e.error?g(e):(()=>{m.remove();const e=document.createElement("ul"),t=document.createElement("span"),n=document.querySelector("body");t.innerHTML="page 1",n.appendChild((e=>{const t=document.createElement("div"),n=document.createTextNode(e);return t.appendChild(n),t})("Вход выполнен успешно!")),n.appendChild(t),n.appendChild(e),n.appendChild(l("prev","prev")),n.appendChild(l("next","next"));const d=document.querySelector("#next"),r=document.querySelector("#prev");d.addEventListener("click",v),d.addEventListener("click",E),r.addEventListener("click",y),r.addEventListener("click",E),c(e,h)})()})).catch(g).finally((()=>u.disabled=!1))},L=()=>{u.disabled=!(o.value&&s.value)};o.addEventListener("blur",L),o.addEventListener("blur",(e=>{/\S+@\S+\.\S+/.test(e.target.value)?p.innerHTML="":p.innerHTML="значение введено не по формату"})),s.addEventListener("blur",L),m.addEventListener("submit",(e=>{e.preventDefault();const t=JSON.stringify({email:o.value,password:s.value});b(t,{"Content-Type":"application/json;charset=utf-8"})}),!1),myApp=e})();